var wpcomProxyRequest=function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){var r=t(1)["default"],o=t(7),a=r(o),s=t(2),i=r(s),c=t(6),u=r(c),l=t(3),f=r(l),d=(0,f["default"])("wpcom-proxy-request"),p="https://public-api.wordpress.com",g=window.location.protocol+"//"+window.location.host;d('using "origin": %o',g);var m=function(){var e=!1;try{window.postMessage({toString:function(){e=!0}},"*")}catch(n){}return e}(),v=void 0,h=!1,y=void 0,b=!1,w={},E=!!window.ProgressEvent&&!!window.FormData,x=function(e){return e&&"[object File]"===Object.prototype.toString.call(e)},C=function(e){var n=e.formData;if(n&&n.length>0)for(var t=0;t<n.length;t++)if(x(n[t][1]))return!0;return!1},M=function(e,n,t){var r=new FileReader;r.onload=function(r){var o=r.target.result;d("finished reading file %o (%o bytes )",e.name,o.byteLength),t(null,{fileContents:o,fileName:e.name,mimeType:e.type},n)},r.onError=function(n){d("got error reading file %o (%o bytes )",e.name,n),t(n)},r.readAsArrayBuffer(e)},A=function(e,n){var t=new u["default"]("load");t.data=t.body=t.response=n,e.dispatchEvent(t)},k=function(e,n){var t=new u["default"]("error");t.error=t.err=n,e.dispatchEvent(t)},L=function(e){return e&&"string"==typeof e?e.replace(/((^|_)[a-z])/g,function(e){return e.toUpperCase().replace("_","")}):""},_=function(e){function n(){d("finished reading all Files"),v.contentWindow.postMessage(e,p)}function t(e,t,s){if(!o){if(e)return o=!0,void k(e);a[s][1]=t,r--,0===r&&n()}}d("converting File instances to ArrayBuffer before invoking postMessage()");for(var r=0,o=!1,a=e.formData,s=0;s<a.length;s++){var i=a[s][1];x(i)&&(r++,M(i,s,t))}0===r&&n()},F=function(e){if(d("sending API request to proxy <iframe> %o",e),b&&C(e))_(e);else try{e=m?JSON.stringify(e):e,e.success=!0,v.contentWindow.postMessage(e,p)}catch(n){if(!C(e))throw n;d("this browser has the File serialization bug"),b=!0,_(e)}},N=function(){if(d('proxy <iframe> "load" event'),h=!0,y){for(var e=0;e<y.length;e++)F(y[e]);y=null}},S=function(e){d('got "progress" event: %o',e);var n=w[e.callbackId];if(n){var t=new u["default"]("progress",e),r=e.upload?n.upload:n;r.dispatchEvent(t)}},q=function(e){if(e.origin!==p)return void d("ignoring message... %o !== %o",e.origin,p);var n=e.data;if(!n)return d("no `data`, bailing");if(m&&"string"==typeof n&&(n=JSON.parse(n)),n.upload||n.download)return S(n);if(!n.length)return d("`messageEv.data` doesn't appear to be an Array, bailing...");var t=n[n.length-1];if(!(t in w))return d("bailing, no matching request with callback: %o",t);var r=w[t];delete w[t];var o=n[0],a=n[1],s=n[2];if(r.params.metaAPI||d("got %o status code for URL: %o",a,r.params.path),o&&s&&(o._headers=s),null==a||2===Math.floor(a/100))A(r,o);else{var i=new Error;i.statusCode=a;for(var c in o)i[c]=o[c];o.error&&(i.name=L(o.error)+"Error"),k(r,i)}},R=function(){d("install()"),y=[],i["default"].bind(window,"message",q),v=document.createElement("iframe"),i["default"].bind(v,"load",N),v.src=p+"/wp-admin/rest-proxy/#"+g,v.style.display="none",document.body.appendChild(v)},j=function(e,n){d("request(%o )",e),"string"==typeof e&&(e={path:e}),v||R();var t=(0,a["default"])();e.callback=t,e.supports_args=!0,e.supports_progress=E,e.method=String(e.method||"GET").toUpperCase(),d("params object: %o",e);var r=new XMLHttpRequest;return r.params=e,w[t]=r,"function"==typeof n&&!function(){var e=!1,t=function(t){e||(e=!0,n(null,t.response||r.response))},o=function(t){e||(e=!0,n(t.error||t.err||t))};i["default"].bind(r,"load",t),i["default"].bind(r,"abort",o),i["default"].bind(r,"error",o)}(),h?F(e):(d("buffering API request since proxying <iframe> is not yet loaded"),y.push(e)),r};e.exports=j},function(e,n){"use strict";n["default"]=function(e){return e&&e.__esModule?e:{"default":e}},n.__esModule=!0},function(e,n){var t=window.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==t?"on":"";n.bind=function(e,n,r,a){return e[t](o+n,r,a||!1),r},n.unbind=function(e,n,t,a){return e[r](o+n,t,a||!1),t}},function(e,n,t){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,a=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))}),e.splice(a,0,r),e}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function i(){var e;try{e=n.storage.debug}catch(t){}return e}function c(){try{return window.localStorage}catch(e){}}n=e.exports=t(4),n.log=a,n.formatArgs=o,n.save=s,n.load=i,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(i())},function(e,n,t){function r(){return n.colors[l++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,a=t-(u||t);e.diff=a,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var i=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;i++;var o=n.formatters[r];if("function"==typeof o){var a=s[i];t=o.call(e,a),s.splice(i,1),i--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var c=o.log||n.log||console.log.bind(console);c.apply(e,s)}t.enabled=!1,o.enabled=!0;var a=n.enabled(e)?o:t;return a.namespace=e,a}function a(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,o=0;r>o;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function i(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=e.exports=o,n.coerce=c,n.disable=s,n.enable=a,n.enabled=i,n.humanize=t(5),n.names=[],n.skips=[],n.formatters={};var u,l=0},function(e,n){function t(e){if(e=""+e,!(e.length>1e4)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(n){var t=parseFloat(n[1]),r=(n[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return t*l;case"days":case"day":case"d":return t*u;case"hours":case"hour":case"hrs":case"hr":case"h":return t*c;case"minutes":case"minute":case"mins":case"min":case"m":return t*i;case"seconds":case"second":case"secs":case"sec":case"s":return t*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=i?Math.round(e/i)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return a(e,u,"day")||a(e,c,"hour")||a(e,i,"minute")||a(e,s,"second")||e+" ms"}function a(e,n,t){return n>e?void 0:1.5*n>e?Math.floor(e/n)+" "+t:Math.ceil(e/n)+" "+t+"s"}var s=1e3,i=60*s,c=60*i,u=24*c,l=365.25*u;e.exports=function(e,n){return n=n||{},"string"==typeof e?t(e):n["long"]?o(e):r(e)}},function(e,n){(function(n){var t=n.ProgressEvent,r=!!t;try{!function(){var e=new t("loaded");r="loaded"===e.type,e=null}()}catch(o){r=!1}e.exports=r?t:"function"==typeof document.createEvent?function(e,n){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),n?(t.lengthComputable=Boolean(n.lengthComputable),t.loaded=Number(n.loaded)||0,t.total=Number(n.total)||0):(t.lengthComputable=!1,t.loaded=t.total=0),t}:function(e,n){var t=document.createEventObject();return t.type=e,n?(t.lengthComputable=Boolean(n.lengthComputable),t.loaded=Number(n.loaded)||0,t.total=Number(n.total)||0):(t.lengthComputable=!1,t.loaded=t.total=0),t}}).call(n,function(){return this}())},function(e,n){function t(e){return e=e||7,Math.random().toString(35).substr(2,e)}e.exports=t}]);
//# sourceMappingURL=wpcom-proxy-request.js.map