{"version":3,"sources":["../../test/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/* eslint-disable no-console */\n\n/**\n * External dependencies\n */\nimport { expect } from 'chai';\n\n/**\n * Internal dependencies\n */\nimport proxy, { reloadProxy } from '../';\n\n/**\n * Expose proxy for development purpose\n */\nwindow.proxy = proxy;\n\nconst runs = [\n\t{ shouldReloadProxy: false },\n\t{ shouldReloadProxy: true },\n];\n\nruns.forEach( ( { shouldReloadProxy } ) => {\n\tlet description = '';\n\tif ( shouldReloadProxy ) {\n\t\tdescription = ' (after proxy has been reloaded)';\n\t}\n\tdescribe( 'wpcom-proxy-request' + description, () => {\n\t\tconst siteDomain = 'en.blog.wordpress.com';\n\t\tconst siteId = 3584907;\n\t\tconst postId = 35600;\n\n\t\t// run the proxy\n\t\tbefore( done => {\n\t\t\tif ( shouldReloadProxy ) {\n\t\t\t\treloadProxy();\n\t\t\t}\n\t\t\tproxy( { metaAPI: { accessAllUsersBlogs: true } }, err => {\n\t\t\t\tif ( err ) {\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\n\t\t\t\tif ( shouldReloadProxy ) {\n\t\t\t\t\tconsole.log( 'proxy reloaded' );\n\t\t\t\t}\n\t\t\t\tconsole.log( 'proxy now running in \"access all user\\'s blogs\" mode' );\n\t\t\t\tdone();\n\t\t\t} );\n\t\t} );\n\n\t\tdescribe( 'REST-API', () => {\n\t\t\tconst apiVersion = '1';\n\n\t\t\tdescribe( 'v1', () => {\n\t\t\t\tdescribe( 'successful requests', () => {\n\t\t\t\t\tit( '[v1] should get `WordPress` blog post info', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: `/sites/${ siteDomain }/posts/${ postId }`,\n\t\t\t\t\t\t\tapiVersion: apiVersion\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.an( 'null' );\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body ).to.be.ok;\n\t\t\t\t\t\t\texpect( body.ID ).to.be.a( 'number' );\n\t\t\t\t\t\t\texpect( body.ID ).to.be.equal( postId );\n\t\t\t\t\t\t\texpect( body.site_ID ).to.be.a( 'number' );\n\t\t\t\t\t\t\texpect( body.site_ID ).to.be.equal( siteId );\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\t\t\t\t\t\t\texpect( headers.status ).to.be.equal( 200 );\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\n\t\t\t\t\tit( '[v1] should get `me` user', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: '/me',\n\t\t\t\t\t\t\tapiVersion: apiVersion\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.an( 'null' );\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body.ID ).to.be.ok;\n\t\t\t\t\t\t\texpect( body.ID ).to.be.a( 'number' );\n\t\t\t\t\t\t\texpect( body.username ).to.be.ok;\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\tdescribe( 'wrong requests', () => {\n\t\t\t\t\tit( '[v1] should get `404` for a non-exiting route', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: '/this-route-does-not-exists'\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\texpect( error ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.name ).to.be.equal( 'NotFoundError' );\n\t\t\t\t\t\t\texpect( error.message ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.statusCode ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.ok;\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body ).to.be.not.ok;\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\t\t\t\t\t\t\texpect( headers.status ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\n\t\t\t\t\tit( '[v1] should get `404` for a non-exiting site', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: '/sites/this-site-does-not-exit-i-hope',\n\t\t\t\t\t\t\tapiVersion: apiVersion\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.name ).to.be.equal( 'UnknownBlogError' );\n\t\t\t\t\t\t\texpect( error.message ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.statusCode ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body ).to.be.not.ok;\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\t\t\t\t\t\t\texpect( headers.status ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\n\t\t\t\t\tit( '[v1] should get `404` for a non-exiting post', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: `/sites/${ siteDomain }/posts/0`,\n\t\t\t\t\t\t\tapiVersion: apiVersion\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.name ).to.be.equal( 'UnknownPostError' );\n\t\t\t\t\t\t\texpect( error.message ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.statusCode ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body ).to.be.not.ok;\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\t\t\t\t\t\t\texpect( headers.status ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\n\t\tdescribe( 'WP-API', () => {\n\t\t\tdescribe( 'wp/v2', () => {\n\t\t\t\tconst namespace = 'wp/v2';\n\n\t\t\t\tdescribe( 'successful requests', () => {\n\t\t\t\t\tit( '[wp/v2] should get `me` user', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: `/sites/${ siteDomain }/users/me`,\n\t\t\t\t\t\t\tapiNamespace: namespace\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.an( 'null' );\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body.name ).to.be.ok;\n\t\t\t\t\t\t\texpect( body.link ).to.be.ok;\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\tdescribe( 'wrong requests', () => {\n\t\t\t\t\tit( '[wp/v2] should get `404` for a non-exiting route', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: '/this-route-does-not-exists',\n\t\t\t\t\t\t\tapiNamespace: namespace\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.name ).to.be.equal( 'RestNoRouteError' );\n\t\t\t\t\t\t\texpect( error.statusCode ).to.be.equal( 404 );\n\t\t\t\t\t\t\texpect( error.message ).to.be.equal(\n\t\t\t\t\t\t\t\t'No route was found matching the URL and request method'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body ).to.be.not.ok;\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\t\t\t\t\t\t\texpect( headers.status ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\n\t\t\t\t\tit( '[wp/v2] should get `404` a non-existing post', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: '/sites/retrofocs.wordpress.com/posts/0',\n\t\t\t\t\t\t\tapiNamespace: namespace\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.name ).to.be.equal( 'RestPostInvalidIdError' );\n\t\t\t\t\t\t\texpect( error.statusCode ).to.be.equal( 404 );\n\t\t\t\t\t\t\texpect( error.message ).to.be.equal( 'Invalid post ID.' );\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body ).to.be.not.ok;\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\t\t\t\t\t\t\texpect( headers.status ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\tdescribe( 'wpcom/v2', () => {\n\t\t\t\tconst namespace = 'wpcom/v2';\n\n\t\t\t\tdescribe( 'successful requests', () => {\n\t\t\t\t\tit( '[wpcom/v2] should get timezones list', function( done ) {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: '/timezones',\n\t\t\t\t\t\t\tapiNamespace: namespace\n\t\t\t\t\t\t}, ( error, body ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.an( 'null' );\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body.found ).to.be.ok;\n\t\t\t\t\t\t\texpect( body.timezones ).to.be.an( 'array' );\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\tdescribe( 'wrong requests', () => {\n\t\t\t\t\tit( '[wpcom/v2] should get `404` for a non-exiting route', done => {\n\t\t\t\t\t\tproxy( {\n\t\t\t\t\t\t\tpath: '/this-route-does-not-exists',\n\t\t\t\t\t\t\tapiNamespace: namespace\n\t\t\t\t\t\t}, ( error, body, headers ) => {\n\t\t\t\t\t\t\t// error\n\t\t\t\t\t\t\texpect( error ).to.be.ok;\n\t\t\t\t\t\t\texpect( error.name ).to.be.equal( 'RestNoRouteError' );\n\t\t\t\t\t\t\texpect( error.statusCode ).to.be.equal( 404 );\n\t\t\t\t\t\t\texpect( error.message ).to.be.equal(\n\t\t\t\t\t\t\t\t'No route was found matching the URL and request method'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// body\n\t\t\t\t\t\t\texpect( body ).to.be.not.ok;\n\n\t\t\t\t\t\t\t// headers\n\t\t\t\t\t\t\texpect( headers ).to.be.ok;\n\t\t\t\t\t\t\texpect( headers.status ).to.be.equal( 404 );\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t} );\n} );\n"]}